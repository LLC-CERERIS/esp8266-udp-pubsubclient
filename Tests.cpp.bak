#include <iostream>
#include "SPtr.h"

class A {
public:
  A() {
    printf("Constructing A\n");
  }

  ~A() {
    printf("Destructing A\n");
  }
};

class B {
public:
  Ref<A> ref;

  B() {
    printf("Constructing B\n");
    SPtr<A> *sptr = new SPtr<A>(new A());
    ref = *sptr->get();
    printf("Assigning Ref\n");
  }

  ~B() {
    printf("Destructing B\n");
  }
};

void func1() {
  B b;
}

int main() {
  printf("Entering func1()\n");
  func1();
  printf("Leaving func1()\n");
}