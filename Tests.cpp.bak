#include <iostream>
#include "SPtr.h"
#include "Vector.h"

class A {
public:
  Vector<char*> vec;

  A() {
    printf("Constructing A\n");
  }

  ~A() {
    printf("Destructing A\n");
  }
};

class B {
public:
  Ref<A> ref;

  B() {
    printf("Constructing B\n");
    SPtr<A> *sptr = new SPtr<A>(new A());
    printf("Assigning Ref\n");
    ref = *sptr->get();
  }

  B &add(char *str) {
    printf("Adding element\n");
    ref->vec.add(str);
    return *this;
  }

  ~B() {
    printf("Destructing B\n");
  }
};

void func1() {
  B().add("s1").add("s2").add("s3");
}

int main() {
  printf("Entering func1()\n");
  func1();
  printf("Leaving func1()\n");
}